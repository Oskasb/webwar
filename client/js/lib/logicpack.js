webpackJsonp([11],{0:function(a,b,c){a.exports=c(385)},385:function(a,b,c){if(a.exports={LogicInterface:c(386),LogicLayer:c(387),LogicNode:c(388),LogicNodeAdd:c(389),LogicNodeApplyMatrix:c(391),LogicNodeConstVec3:c(392),LogicNodeDebug:c(393),LogicNodeEntityProxy:c(394),LogicNodeFloat:c(395),LogicNodeInput:c(396),LogicNodeInt:c(397),LogicNodeLightComponent:c(398),LogicNodeMax:c(399),LogicNodeMeshRendererComponent:c(400),LogicNodeMouse:c(401),LogicNodeMultiply:c(402),LogicNodeMultiplyFloat:c(403),LogicNodeOutput:c(404),LogicNodeRandom:c(405),LogicNodeRotationMatrix:c(406),LogicNodes:c(390),LogicNodeSine:c(407),LogicNodeSub:c(408),LogicNodeTime:c(409),LogicNodeTransformComponent:c(410),LogicNodeVec3:c(411),LogicNodeVec3Add:c(412),LogicNodeWASD:c(413),LogicNodeWASD2:c(414),LogicComponent:c(415),LogicComponentHandler:c(416),LogicSystem:c(417)},"undefined"!=typeof window)for(var d in a.exports)window.goo[d]=a.exports[d]},386:function(a,b){function c(a){this.ports=[],this.configOpts=[],void 0===a?this.dn_pfx="":this.dn_pfx=a+"-"}c.prototype.addInputProperty=function(a,b,d){return this.ports.push({id:++c._portID,input:!0,property:!0,event:!1,name:this.dn_pfx+a,type:b,def:d}),c._portID},c.prototype.addOutputProperty=function(a,b){return this.ports.push({id:++c._portID,input:!1,property:!0,event:!1,name:this.dn_pfx+a,type:b}),c._portID},c.prototype.addInputEvent=function(a){return this.ports.push({id:++c._portID,input:!0,property:!1,event:!0,name:this.dn_pfx+a}),c._portID},c.prototype.addOutputEvent=function(a){return this.ports.push({id:++c._portID,input:!1,property:!1,event:!0,name:this.dn_pfx+a}),c._portID},c.createDynamicInput=function(a){return{id:c.makeDynamicId(),input:!0,property:!0,event:!0,dynamic:!0,name:a}},c.createDynamicOutput=function(a){return{id:c.makeDynamicId(),input:!1,property:!0,event:!0,dynamic:!0,name:a}},c.prototype.addConfigEntry=function(a){this.configOpts.push(a)},c.prototype.getConfigEntries=function(){return this.configOpts},c.prototype.getPorts=function(){return this.ports},c.isDynamicPortName=function(a){return"$"===a[0]},c.makeDynamicId=function(){return++c._portID},c.makePortDataName=function(a){if(void 0!==a.dataname)return a.dataname;var b=a.input?"in-":"out-";a.property&&(b+="prop-"),a.event&&(b+="event-");var c=a.dynamic===!0?"$":"";return c+b+a.name},c.assignPortDataName=function(a,b){a.dataname=b},c._portID=0,a.exports=c},387:function(a,b,c){function d(a){this._logicInterfaces={},this._connectionsBySource={},this._instanceID=0,this._updateRound=0,this._nextFrameNotifications=[],this.ownerEntity=a,this.logicSystem=a._world.getSystem("LogicSystem")}var e=c(386);d.prototype.clear=function(){this._logicInterfaces={},this._connectionsBySource={},this._instanceID=0,this._nextFrameNotifications=[]},d.prototype.addInterfaceInstance=function(a,b,c,d){null===c&&(c="_auto-"+this._instanceID);var e={id:this._instanceID,name:c,obj:b,iface:a,layer:this,wantsProcess:d};this._instanceID++;var f=this;return e.remove=function(){delete this.outConnections,delete f._logicInterfaces[c],f.unresolveAllConnections()},e.getPorts=function(){return a.getPorts()},void 0!==b.entityRef&&(e.proxyRef=b.entityRef),this._logicInterfaces[c]=e,e},d.prototype.unresolveAllConnections=function(){for(var a in this._logicInterfaces){var b=this._logicInterfaces[a].outConnections;if(void 0!==b)for(var c in b)for(var d=b[c],e=0;e<d.length;e++)d[e].length>2&&(d[e]=[d[e][0],d[e][1]])}},d.resolvePortID=function(a,b){if("number"==typeof b)return b;if(e.isDynamicPortName(b))return b;for(var c=a.getPorts(),d=0;d<c.length;d++)if(e.makePortDataName(c[d])===b)return c[d].id;return console.warn("Unable to resolve port ["+b+"]!"),null},d.prototype.resolveTargetAndPortID=function(a,b){var c=this._logicInterfaces[a];if(void 0!==c){if(void 0!==c.obj.entityRef&&e.isDynamicPortName(b)){var f=this.logicSystem.getLayerByEntity(c.obj.entityRef);for(var g in f._logicInterfaces){var h=f._logicInterfaces[g];if("LogicNodeInput"===h.obj.type&&null!==h.obj.dummyInport&&e.makePortDataName(h.obj.dummyInport))return{target:h,portID:b}}}var i=d.resolvePortID(c,b);return null!==i?{target:c,portID:i}:(console.warn("Failed resolving target&portid to "+a+":"+b),null)}},d.prototype.addConnectionByName=function(a,b,c,e){void 0===a.outConnections&&(a.outConnections={});var f=d.resolvePortID(a,b);void 0===a.outConnections[f]&&(a.outConnections[f]=[]),a.outConnections[f].push([c,e])},d.doConnections=function(a,b,c){if(void 0!==a.outConnections){var d=a.outConnections[b];if(void 0!==d){0===d.length&&delete a.outConnections;for(var e=0;e<d.length;e++){var f=d[e];if(2===f.length){var g=a.layer.resolveTargetAndPortID(f[0],f[1]);if(null===g){console.log("Target unresolved "+f[0]+" and "+f[1]);continue}f.push(g.target),f.push(g.portID)}c(f[2],f[3])}}}},d.writeValue=function(a,b,c){d.doConnections(a,b,function(a,b){void 0===a._portValues&&(a._portValues={}),void 0===a._lastNotification&&(a._lastNotification={});var d=a._portValues[b];if(a._portValues[b]=c,d!==c){var e=a.layer;a._lastNotification[b]!==e._updateRound?(a._lastNotification[b]=e._updateRound,a.obj.onInputChanged(a,b,c)):e._nextFrameNotifications.push([a,b,c])}})},d.writeValueToLayerOutput=function(a,b,c){var d=a.layer.logicSystem.makeOutputWriteFn(a.layer.ownerEntity,b);d(c)},d.readPort=function(a,b){var c=a._portValues;if(void 0!==c?c=c[b]:a._portValues={},void 0!==c)return c;var d=a.iface.getPorts();for(var e in d)if(d[e].id===b)return a._portValues[b]=d[e].def;return void console.log("Could not find the port ["+b+"]!")},d.fireEvent=function(a,b){d.doConnections(a,b,function(a,b){a.obj.onEvent(a,b)})},d.resolveEntityRef=function(a,b){return"[self]"===b?a.layer.ownerEntity:a.layer.logicSystem.resolveEntityRef(b)},d.prototype.process=function(a){var b=this._nextFrameNotifications;this._nextFrameNotifications=[];for(var c=0;c<b.length;c++){var d=b[c];d[0]._lastNotification[d[1]]=this._updateRound,d[0].obj.onInputChanged(d[0],d[1],d[2])}for(var c in this._logicInterfaces)this._logicInterfaces[c].wantsProcess&&this._logicInterfaces[c].obj.processLogic&&this._logicInterfaces[c].obj.processLogic(a);this._updateRound++},d.prototype.forEachLogicObject=function(a){for(var b in this._logicInterfaces){var c=this._logicInterfaces[b].obj;void 0!==c&&a(c)}},d.prototype.connectObjectsWithLogic=function(a,b,c,d){this.connectEndpoints(a.logicInstance,b,c.logicInstance,d)},d.prototype.connectEndpoints=function(a,b,c,d){this.addConnectionByName(a,b,c.name,d)},a.exports=d},388:function(a,b){function c(){Object.defineProperty(this,"id",{value:c._instanceCount++,writable:!1}),this.config={ref:"unconf-"+this.id},this.name=void 0!==name?name:"Logic_"+this.id,this.logicInstance=null,this.wantsProcessCall=!1}c.prototype.addToLogicLayer=function(a,b){if(null!==this.logicInstance&&this.logicInstance.remove(),this.logicInstance=a.addInterfaceInstance(this.logicInterface,this,b,this.wantsProcessCall),void 0!==this.connections){for(var c=0;c<this.connections.length;c++){var d=this.connections[c];a.addConnectionByName(this.logicInstance,d.sourcePort,d.targetRef,d.targetPort)}delete this.connections}},c.prototype.configure=function(a){var b=void 0!==a.config?a.config:{};this.onConfigure(b),this.config=b,this.connections=a.connections},c.prototype.onConfigure=function(){},c.prototype.onSystemStarted=function(){},c.prototype.onSystemStopped=function(){},c.prototype.onInputChanged=function(){},c._instanceCount=0,a.exports=c},389:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeAdd"}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Add",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX)+e.readPort(a,d.inportY);e.writeValue(this.logicInstance,d.outportSum,b)},d.logicInterface=new h,d.outportSum=d.logicInterface.addOutputProperty("sum","float"),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.inportY=d.logicInterface.addInputProperty("y","float",0),g.registerType("LogicNodeAdd",d),a.exports=d},390:function(a,b){function c(){}c.types={},c.registerType=function(a,b){c.types[a]={fn:b,name:a,editorName:b.editorName}},c.getInterfaceByName=function(a){return void 0!==c.types[a]?c.types[a].fn.logicInterface:null},c.getClass=function(a){return void 0===c.types[a]?function(){return console.error("LogicNode type ["+a+"] does not exist."),null}:c.types[a].fn},c.getAllTypes=function(){var a=[];for(var b in c.types)a.push(c.types[b]);return a},a.exports=c},391:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeApplyMatrix",this.vec=new i}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8),j=c(24);d.prototype=Object.create(f.prototype),d.editorName="ApplyMatrix",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=e.readPort(a,d.inportY);this.vec.copy(b),c.applyPost(this.vec),e.writeValue(this.logicInstance,d.outportProduct,this.vec)},d.logicInterface=new h,d.outportProduct=d.logicInterface.addOutputProperty("product","Vector3"),d.inportX=d.logicInterface.addInputProperty("vec","Vector3",new i),d.inportY=d.logicInterface.addInputProperty("mat","Matrix3",new j),g.registerType("LogicNodeApplyMatrix",d),a.exports=d},392:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeConstVec3"}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8);d.prototype=Object.create(f.prototype),d.editorName="ConstVec3",d.prototype.onConfigure=function(a){void 0!==a.value&&(this.value=a.value,e.writeValue(this.logicInstance,d.outportVec,new i(this.x,this.y,this.z)))},d.prototype.onSystemStarted=function(){e.writeValue(this.logicInstance,d.outportVec,new i(this.x,this.y,this.z))},g.registerType("LogicNodeConstVec3",d),d.logicInterface=new h,d.outportVec=d.logicInterface.addOutputProperty("xyz","Vector3"),d.logicInterface.addConfigEntry({name:"x",type:"float",label:"X"}),d.logicInterface.addConfigEntry({name:"y",type:"float",label:"Y"}),d.logicInterface.addConfigEntry({name:"z",type:"float",label:"Z"}),a.exports=d},393:function(a,b,c){function d(){e.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeDebug",this._time=0}var e=c(388),f=c(390),g=c(386);d.prototype=Object.create(e.prototype),d.editorName="Debug",d.prototype.onInputChanged=function(a,b,c){console.log("LogicNodeDebug ("+this.logicInstance.name+") value port "+b+" = ["+c+"]")},d.prototype.onEvent=function(a,b){console.log("LogicNodeDebug ("+this.logicInstance.name+") event on port "+b)},d.logicInterface=new g,d.inportEvent=d.logicInterface.addInputEvent("Event"),d.inportFloat=d.logicInterface.addInputProperty("FloatValue","float",0),f.registerType("LogicNodeDebug",d),a.exports=d},394:function(a,b,c){function d(){e.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeEntityProxy"}var e=c(388),f=c(390),g=c(386);d.prototype=Object.create(e.prototype),d.editorName="EntityProxy",d.prototype.onConfigure=function(a){this.entityRef=a.entityRef},d.logicInterface=new g("Component Proxy"),d.logicInterface.addConfigEntry({name:"entityRef",type:"entityRef",label:"Entity"}),f.registerType("LogicNodeEntityProxy",d),a.exports=d},395:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeFloat"}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Float",d.prototype.onConfigure=function(a){void 0!==a.value&&(this.value=a.value,e.writeValue(this.logicInstance,d.outportFloat,this.value))},d.prototype.onSystemStarted=function(){e.writeValue(this.logicInstance,d.outportFloat,this.value)},g.registerType("LogicNodeFloat",d),d.logicInterface=new h,d.outportFloat=d.logicInterface.addOutputProperty("value","float"),d.logicInterface.addConfigEntry({name:"value",type:"float",label:"Value"}),a.exports=d},396:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeInput",this.dummyInport=null}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Input",d.prototype.onConfigure=function(a){this.dummyInport=h.createDynamicInput(a.Name)},d.prototype.onInputChanged=function(a,b,c){e.writeValue(this.logicInstance,d.outportInput,c)},g.registerType("LogicNodeInput",d),d.logicInterface=new h,d.outportInput=d.logicInterface.addOutputProperty("Input","any"),d.logicInterface.addConfigEntry({name:"Name",type:"string",label:"Name"}),a.exports=d},397:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeInt",this.defValue=0,this.value=0}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Int",d.prototype.onConfigure=function(a){void 0!==a.value&&(this.defValue=a.value),this.value=this.defValue},d.prototype.onConnected=function(a){e.writeValue(a,d.outportInt,this.value)},d.prototype.onEvent=function(a,b){b===d.ineventIncrease?this.value=this.value+1:b===d.ineventDecrease?this.value=this.value-1:this.value=this.defValue,e.writeValue(this.logicInstance,d.outportInt,this.value)},d.prototype.onSystemStarted=function(){e.writeValue(this.logicInstance,d.outportInt,this.value)},d.prototype.onSystemStopped=function(){},g.registerType("LogicNodeInt",d),d.logicInterface=new h,d.ineventReset=d.logicInterface.addInputEvent("reset"),d.ineventIncrease=d.logicInterface.addInputEvent("increase"),d.ineventDecrease=d.logicInterface.addInputEvent("decrease"),d.outportInt=d.logicInterface.addOutputProperty("value","int"),d.logicInterface.addConfigEntry({name:"value",type:"int",label:"Value"}),a.exports=d},398:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LightComponent"}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="LightComponent",d.prototype.onConfigure=function(a){this.entityRef=a.entityRef},d.logicInterface=new h("LightComponent"),d.inportIntensity=d.logicInterface.addInputProperty("Intensity","float"),d.inportRange=d.logicInterface.addInputProperty("Range","float"),d.prototype.onInputChanged=function(a,b,c){var f=e.resolveEntityRef(a,this.entityRef);b===d.inportIntensity?f.lightComponent.light.intensity=c:b===d.inportRange&&(f.lightComponent.light.range=c)},d.logicInterface.addConfigEntry({name:"entityRef",type:"entityRef",label:"Entity"}),g.registerType("LightComponent",d),a.exports=d},399:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeMax"}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Max",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=e.readPort(a,d.inportY),f=Math.max(b,c);e.writeValue(a,d.outportSum,f)},d.logicInterface=new h,d.outportSum=d.logicInterface.addOutputProperty("max","float"),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.inportY=d.logicInterface.addInputProperty("y","float",0),g.registerType("LogicNodeMax",d),a.exports=d},400:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="MeshRendererComponent"}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8);d.prototype=Object.create(f.prototype),d.editorName="MeshRendererComponent",d.prototype.onConfigure=function(a){this.entityRef=a.entityRef},d.prototype.onInputChanged=function(a,b,c){var f=e.resolveEntityRef(a,this.entityRef),g=f.meshRendererComponent;b===d.inportAmbient&&g.materials.length>0&&(g.meshRendererComponent.materials[0].uniforms.materialAmbient[0]=c[0],g.materials[0].uniforms.materialAmbient[1]=c[1],g.materials[0].uniforms.materialAmbient[2]=c[2])},d.prototype.onEvent=function(a,b){var c=e.resolveEntityRef(a,this.entityRef),f=c.meshRendererComponent;b===d.inportShadows?f.castShadows=!f.castShadows:b===d.inportHidden&&(f.hidden=!f.hidden)},d.logicInterface=new h("Material"),d.inportShadows=d.logicInterface.addInputEvent("toggle-shadows"),d.inportHidden=d.logicInterface.addInputEvent("toggle-hidden"),d.inportAmbient=d.logicInterface.addInputProperty("ambient","Vector3",new i(.5,0,0)),d.logicInterface.addConfigEntry({name:"entityRef",type:"entityRef",label:"Entity"}),g.registerType("MeshRendererComponent",d),a.exports=d},401:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeMouse",this.eventMouseMove=function(a){var b=a.clientX,c=a.clientY,f=b-this.x,g=c-this.y;e.writeValue(this.logicInstance,d.portX,b),e.writeValue(this.logicInstance,d.portY,c),e.writeValue(this.logicInstance,d.portDX,f),e.writeValue(this.logicInstance,d.portDY,g)}.bind(this),this.eventMouseDown=function(a){0===a.button&&e.fireEvent(this.logicInstance,d.outEventLmb),2===a.button&&e.fireEvent(this.logicInstance,d.outEventRmb)}.bind(this)}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Mouse",d.prototype.onSystemStarted=function(){this.x=0,this.y=0,document.addEventListener("mousemove",this.eventMouseMove,!1),document.addEventListener("mousedown",this.eventMouseDown,!1)},d.prototype.onSystemStopped=function(){document.removeEventListener("mousemove",this.eventMouseMove),document.removeEventListener("mousedown",this.eventMouseDown)},d.logicInterface=new h,d.portX=d.logicInterface.addOutputProperty("x","float",0),d.portY=d.logicInterface.addOutputProperty("y","float",0),d.portDX=d.logicInterface.addOutputProperty("dx","float",0),d.portDY=d.logicInterface.addOutputProperty("dy","float",0),d.outEventLmb=d.logicInterface.addOutputEvent("lmb"),d.outEventRmb=d.logicInterface.addOutputEvent("rmb"),g.registerType("LogicNodeMouse",d),a.exports=d},402:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeMultiply",this._x=this._y=0}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Multiply",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=e.readPort(a,d.inportY);e.writeValue(a,d.outportProduct,b*c)},d.logicInterface=new h,d.outportProduct=d.logicInterface.addOutputProperty("product","float"),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.inportY=d.logicInterface.addInputProperty("y","float",0),g.registerType("LogicNodeMultiply",d),a.exports=d},403:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeMultiplyFloat",this._x=this._y=0}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="MultiplyFloat",d.prototype.onConfigure=function(a){void 0!==a.value&&(this.value=a.value)},d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=this.value;e.writeValue(a,d.outportProduct,b*c)},d.logicInterface=new h,d.outportProduct=d.logicInterface.addOutputProperty("product","float"),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.logicInterface.addConfigEntry({name:"value",type:"float",label:"Value"}),g.registerType("LogicNodeMultiplyFloat",d),a.exports=d},404:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeOutput",this.realOutport=null}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Output",d.prototype.onInputChanged=function(a,b,c){e.writeValueToLayerOutput(a,this.realOutport,c)},d.prototype.onEvent=function(){},f.prototype.onConfigure=function(a){this.realOutport=h.createDynamicOutput(a.Name)},g.registerType("LogicNodeOutput",d),d.logicInterface=new h,d.inportOutput=d.logicInterface.addInputProperty("Output","any"),d.logicInterface.addConfigEntry({name:"Name",type:"string",label:"Name"}),a.exports=d},405:function(a,b,c){function d(){f.call(this),this.wantsProcessCall=!0,this.logicInterface=d.logicInterface,this.type="LogicNodeRandom"}var e=c(387),f=c(388),g=c(386),h=c(390);d.prototype=Object.create(f.prototype),d.editorName="Random",d.logicInterface=new g,d.outPropRandom=d.logicInterface.addOutputProperty("Random0_1","float"),d.prototype.processLogic=function(){e.writeValue(this.logicInstance,d.outPropRandom,Math.random())},h.registerType("LogicNodeRandom",d),a.exports=d},406:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeRotationMatrix",this.vec=new i}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8),j=c(24);d.prototype=Object.create(f.prototype),d.editorName="RotationMatrix",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=new j;c.fromAngles(b.x,b.y,b.z),e.writeValue(a,d.outportProduct,c)},d.logicInterface=new h,d.inportX=d.logicInterface.addInputProperty("vec","Vector3",new i),d.outportProduct=d.logicInterface.addOutputProperty("mat","Matrix3",new j),g.registerType("LogicNodeRotationMatrix",d),a.exports=d},407:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeSine",this._time=0}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Sine",d.prototype.onInputChanged=function(a,b,c){e.writeValue(this.logicInstance,d.outportSin,Math.sin(c)),e.writeValue(this.logicInstance,d.outportCos,Math.cos(c))},d.logicInterface=new h,d.outportSin=d.logicInterface.addOutputProperty("Sine","float"),d.outportCos=d.logicInterface.addOutputProperty("Cosine","float"),d.inportPhase=d.logicInterface.addInputProperty("Phase","float",0),g.registerType("LogicNodeSine",d),a.exports=d},408:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeSub"}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="Sub",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX)-e.readPort(a,d.inportY);e.writeValue(this.logicInstance,d.outportSum,b)},d.logicInterface=new h,d.outportSum=d.logicInterface.addOutputProperty("sum","float"),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.inportY=d.logicInterface.addInputProperty("y","float",0),g.registerType("LogicNodeSub",d),a.exports=d},409:function(a,b,c){function d(){f.call(this),this.wantsProcessCall=!0,this.logicInterface=d.logicInterface,this.type="LogicNodeTime",this._time=0,this._running=!0}var e=c(387),f=c(388),g=c(386),h=c(390);d.prototype=Object.create(f.prototype),d.editorName="Time",d.logicInterface=new g,d.outPropTime=d.logicInterface.addOutputProperty("Time","float"),d.outEventReached1=d.logicInterface.addOutputEvent(">1"),d.inEventStart=d.logicInterface.addInputEvent("Start"),d.inEventStop=d.logicInterface.addInputEvent("Stop"),d.inEventReset=d.logicInterface.addInputEvent("Reset"),d.prototype.onConfigure=function(){this._time=0,this._running=!0},d.prototype.processLogic=function(a){if(this._running){var b=this._time;this._time+=a,e.writeValue(this.logicInstance,d.outPropTime,this._time),1>b&&this._time>=1&&e.fireEvent(this.logicInstance,d.outEventReached1)}},d.prototype.onEvent=function(a,b){b===d.inEventStart?this._running=!0:b===d.inEventStop?this._running=!1:b===d.inEventReset&&(this._time=0,e.writeValue(this.logicInstance,d.outPropTime,0))},h.registerType("LogicNodeTime",d),a.exports=d},410:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="TransformComponent"}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8),j=c(24);d.prototype=Object.create(f.prototype),d.editorName="TransformComponent",d.prototype.onConfigure=function(a){this.entityRef=a.entityRef},d.prototype.onInputChanged=function(a,b,c){var f=e.resolveEntityRef(a,this.entityRef),g=f.transformComponent;b===d.inportPos?g.setTranslation(c):b===d.inportRot?g.setRotation(c[0],c[1],c[2]):b===d.inportScale&&g.setScale(c),e.writeValue(this.logicInstance,d.outportPos,f.transformComponent.transform.translation.clone()),e.writeValue(this.logicInstance,d.outportRot,f.transformComponent.transform.rotation.clone())},d.logicInterface=new h("Transform"),d.inportPos=d.logicInterface.addInputProperty("position","Vector3",new i(0,0,0)),d.inportRot=d.logicInterface.addInputProperty("rotation","Vector3",new i(0,0,0)),d.inportScale=d.logicInterface.addInputProperty("scale","Vector3",new i(1,1,1)),d.outportPos=d.logicInterface.addOutputProperty("outpos","Vector3",new i),d.outportRot=d.logicInterface.addOutputProperty("rotmat","Matrix3",new j),d.logicInterface.addConfigEntry({name:"entityRef",type:"entityRef",label:"Entity"}),g.registerType("TransformComponent",d),a.exports=d},411:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeVec3",this._x=this._y=this._z=0}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8);d.prototype=Object.create(f.prototype),d.editorName="Vec3",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=e.readPort(a,d.inportY),f=e.readPort(a,d.inportZ),g=e.readPort(a,d.inportVec3);null!==g&&(b=g.x,c=g.y,f=g.z),e.writeValue(this.logicInstance,d.outportVec3,new i(b,c,f)),e.writeValue(this.logicInstance,d.outportX,b),e.writeValue(this.logicInstance,d.outportY,c),e.writeValue(this.logicInstance,d.outportZ,f)},d.logicInterface=new h,d.outportVec3=d.logicInterface.addOutputProperty("xyz","Vector3"),d.inportVec3=d.logicInterface.addInputProperty("xyz","Vector3",null),d.inportX=d.logicInterface.addInputProperty("x","float",0),d.inportY=d.logicInterface.addInputProperty("y","float",0),d.inportZ=d.logicInterface.addInputProperty("z","float",0),d.outportX=d.logicInterface.addOutputProperty("x","float",0),d.outportY=d.logicInterface.addOutputProperty("y","float",0),d.outportZ=d.logicInterface.addOutputProperty("z","float",0),g.registerType("LogicNodeVec3",d),a.exports=d},412:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeVec3Add"}var e=c(387),f=c(388),g=c(390),h=c(386),i=c(8);d.prototype=Object.create(f.prototype),d.editorName="AddVec3",d.prototype.onInputChanged=function(a){var b=e.readPort(a,d.inportX),c=e.readPort(a,d.inportY),f=new i;f.copy(b).add(c),e.writeValue(this.logicInstance,d.outportSum,f)},d.logicInterface=new h,d.outportSum=d.logicInterface.addOutputProperty("sum","Vector3"),d.inportX=d.logicInterface.addInputProperty("vec1","Vector3",new i),d.inportY=d.logicInterface.addInputProperty("vec2","Vector3",new i),g.registerType("LogicNodeVec3Add",d),a.exports=d},413:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeWASD";var a={};this.eventListenerDown=function(b){var c=String.fromCharCode(b.which).toLowerCase();if(!a[c]){var f=d.downKeys[c];f&&(a[c]=!0,e.fireEvent(this.logicInstance,f))}}.bind(this),this.eventListenerUp=function(b){var c=String.fromCharCode(b.which).toLowerCase();a[c]&&(a[c]=!1);var f=d.upKeys[c];f&&e.fireEvent(this.logicInstance,f)}.bind(this)}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="WASD",d.prototype.onSystemStarted=function(){document.addEventListener("keydown",this.eventListenerDown),document.addEventListener("keyup",this.eventListenerUp)},d.prototype.onSystemStopped=function(){document.removeEventListener("keydown",this.eventListenerDown),document.removeEventListener("keyup",this.eventListenerUp)},d.logicInterface=new h,d.downKeys={w:d.logicInterface.addOutputEvent("W-down"),a:d.logicInterface.addOutputEvent("A-down"),s:d.logicInterface.addOutputEvent("S-down"),d:d.logicInterface.addOutputEvent("D-down")},d.upKeys={w:d.logicInterface.addOutputEvent("W-up"),a:d.logicInterface.addOutputEvent("A-up"),s:d.logicInterface.addOutputEvent("S-up"),d:d.logicInterface.addOutputEvent("D-up")},g.registerType("LogicNodeWASD",d),a.exports=d},414:function(a,b,c){function d(){f.call(this),this.logicInterface=d.logicInterface,this.type="LogicNodeWASD2";var a={};this.eventListenerDown=function(b){var c=String.fromCharCode(b.which).toLowerCase();if(!a[c]){var f=d.downKeys[c];f&&(a[c]=!0,e.writeValue(this.logicInstance,f.port,f.value))}}.bind(this),this.eventListenerUp=function(b){var c=String.fromCharCode(b.which).toLowerCase();a[c]&&(a[c]=!1);var f=d.downKeys[c];f&&e.writeValue(this.logicInstance,f.port,0)}.bind(this)}var e=c(387),f=c(388),g=c(390),h=c(386);d.prototype=Object.create(f.prototype),d.editorName="WASD2",d.prototype.onSystemStarted=function(){document.addEventListener("keydown",this.eventListenerDown),document.addEventListener("keyup",this.eventListenerUp)},d.prototype.onSystemStopped=function(){document.removeEventListener("keydown",this.eventListenerDown),document.removeEventListener("keyup",this.eventListenerUp)},d.logicInterface=new h,d.downKeys={w:{port:d.logicInterface.addOutputProperty("W","float",0),value:1},a:{port:d.logicInterface.addOutputProperty("A","float",0),value:1},s:{port:d.logicInterface.addOutputProperty("S","float",0),value:-1},d:{port:d.logicInterface.addOutputProperty("D","float",0),value:-1}},g.registerType("LogicNodeWASD2",d),a.exports=d},415:function(a,b,c){function d(a){g.call(this),this.type="LogicComponent",this.parent=null,this.logicInstance=null,this.logicLayer=null,this.nodes={},this._entity=a}var e=c(387),f=c(390),g=c(20);d.prototype=Object.create(g.prototype),d.prototype.configure=function(a){for(var b in this.nodes)void 0!==this.nodes[b].onSystemStopped&&this.nodes[b].onSystemStopped(!1);this.logicLayer=new e(this._entity),this.nodes={};for(var c in a.logicNodes){var d=a.logicNodes[c],g=f.getClass(d.type),h=new g;h.configure(d),h.addToLogicLayer(this.logicLayer,d.id),this.nodes[c]=h}},d.prototype.process=function(a){null!==this.logicLayer&&this.logicLayer.process(a)},a.exports=d},416:function(a,b,c){function d(){e.apply(this,arguments)}var e=c(88),f=c(415),g=c(54);c(394),c(410),c(400),c(398),c(393),c(405),c(409),c(407),c(411),c(402),c(413),c(414),c(401),c(389),c(408),c(395),c(391),c(392),c(412),c(406),c(403),c(399),c(397),c(396),c(404),d.prototype=Object.create(e.prototype),d.prototype.constructor=d,e._registerClass("logic",d),d.prototype._create=function(a,b){var c=new f(a);return c.configure(b),a.setComponent(c),c},d.prototype.update=function(a,b){var c=e.prototype.update.call(this,a,b);return c.configure(b),g.resolve(c)},a.exports=d},417:function(a,b,c){function d(){e.call(this,"LogicSystem",null),this.passive=!0,this._entities={}}var e=c(42),f=c(387),g=c(386);d.prototype=Object.create(e.prototype),d.prototype.inserted=function(a){this._entities[a.name]={entity:a,inserted:!1}},d.prototype.deleted=function(a){delete this._entities[a.name]},d.prototype.process=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];void 0!==d.logicComponent&&d.logicComponent.process(b)}},d.prototype.resolveEntityRef=function(a){var b=this._entities[a];return void 0!==b?b.entity:void 0},d.prototype.getLayerByEntity=function(a){var b=this._entities[a];if(void 0===b)return b;var c=b.entity.logicComponent;return void 0===c?c:c.logicLayer},d.prototype.makeOutputWriteFn=function(a,b){var c=[];return this.forEachLogicObject(function(d){"LogicNodeEntityProxy"===d.type&&d.entityRef===a.name&&c.push([d.logicInstance,g.makePortDataName(b)])}),function(a){for(var b=0;b<c.length;b++)f.writeValue(c[b][0],c[b][1],a)}},d.prototype.forEachLogicObject=function(a){for(var b in this._entities){var c=this._entities[b].entity;void 0!==c.logicComponent&&c.logicComponent.logicLayer.forEachLogicObject(a)}},d.prototype.play=function(){this.passive=!1,this.forEachLogicObject(function(a){void 0!==a.onSystemStarted&&a.onSystemStarted()})},d.prototype.pause=function(){this.passive=!0,this.forEachLogicObject(function(a){void 0!==a.onSystemStopped&&a.onSystemStopped(!0)})},d.prototype.stop=function(){this.passive=!0,this.forEachLogicObject(function(a){void 0!==a.onSystemStopped&&a.onSystemStopped(!1)});for(var a in this._entities)this._entities[a].inserted=!1},a.exports=d}});