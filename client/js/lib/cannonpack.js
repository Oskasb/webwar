webpackJsonp([3],{0:function(a,b,c){a.exports=c(101)},101:function(a,b,c){if(a.exports={CannonBoxColliderComponent:c(102),CannonCylinderColliderComponent:c(103),CannonDistanceJointComponent:c(104),CannonPlaneColliderComponent:c(105),CannonRigidbodyComponent:c(106),CannonSphereColliderComponent:c(107),CannonSystem:c(108),CannonTerrainColliderComponent:c(109)},"undefined"!=typeof window)for(var d in a.exports)window.goo[d]=a.exports[d]},102:function(a,b,c){function d(a){e.apply(this,arguments),this.type="CannonBoxColliderComponent",a=a||{};var b=this.halfExtents=a.halfExtents||new f(.5,.5,.5);this.cannonShape=new CANNON.Box(new CANNON.Vec3(b.x,b.y,b.z)),this.isTrigger="undefined"!=typeof a.isTrigger?a.isTrigger:!1}var e=c(20),f=c(8);d.prototype=Object.create(e.prototype),d.constructor=d,a.exports=d},103:function(a,b,c){function d(a){e.apply(this,arguments),a=a||{},this.type="CannonCylinderColliderComponent";var b="number"==typeof a.radiusTop?a.radiusTop:.5,c="number"==typeof a.radiusBottom?a.radiusBottom:.5,d="number"==typeof a.height?a.height:1,f="number"==typeof a.numSegments?a.numSegments:10;this.cannonShape=new CANNON.Cylinder(b,c,d,f)}var e=c(20);d.prototype=Object.create(e.prototype),d.constructor=d,a.exports=d},104:function(a,b,c){function d(a){e.apply(this,arguments),a=a||{},this.type="CannonDistanceJointComponent",f.defaults(a,{distance:1,connectedBody:null}),this.distance=a.distance,this.connectedBody=a.connectedBody,this.cannonConstraint=null}var e=c(20),f=c(6);d.prototype=Object.create(e.prototype),d.constructor=d,d.prototype.createConstraint=function(a){var b=a.cannonRigidbodyComponent.body,c=this.connectedBody.body;return this.cannonConstraint=new CANNON.DistanceConstraint(b,c,this.distance),this.cannonConstraint},a.exports=d},105:function(a,b,c){function d(a){e.apply(this,arguments),this.type="CannonPlaneColliderComponent",a=a||{},this.cannonShape=new CANNON.Plane}var e=c(20);d.prototype=Object.create(e.prototype),d.constructor=d,a.exports=d},106:function(a,b,c){function d(a){e.apply(this,arguments),a=a||{},this.type="CannonRigidbodyComponent",i.defaults(a,{mass:1,velocity:new g}),this.mass=a.mass,this._initialPosition=null,this._initialVelocity=new g,this._initialVelocity.set(a.velocity),this.body=null,this.centerOfMassOffset=new g}var e=c(20),f=c(23),g=c(8),h=c(41),i=c(6);d.prototype=Object.create(e.prototype),d.constructor=d,d.prototype.api={setForce:function(a){d.prototype.setForce.call(this.cannonRigidbodyComponent,a)},setVelocity:function(a){d.prototype.setVelocity.call(this.cannonRigidbodyComponent,a)},setPosition:function(a){d.prototype.setPosition.call(this.cannonRigidbodyComponent,a)},setAngularVelocity:function(a){d.prototype.setAngularVelocity.call(this.cannonRigidbodyComponent,a)}};var j=new f;d.prototype.setForce=function(a){this.body.force.set(a.x,a.y,a.z)},d.prototype.setVelocity=function(a){this.body.velocity.set(a.x,a.y,a.z)},d.prototype.setPosition=function(a){this.body?this.body.position.set(a.x,a.y,a.z):this._initialPosition=new g(a)},d.prototype.setAngularVelocity=function(a){this.body.angularVelocity.set(a.x,a.y,a.z)},d.getCollider=function(a){return a.cannonBoxColliderComponent||a.cannonPlaneColliderComponent||a.cannonSphereColliderComponent||a.cannonTerrainColliderComponent||a.cannonCylinderColliderComponent||null},d.prototype.addShapesToBody=function(a){var b=a.cannonRigidbodyComponent.body,c=d.getCollider(a);if(c)b.addShape(c.cannonShape);else{var e=a.transformComponent.sync().worldTransform,f=new h;f.copy(e),f.invert(f);var g=new h,i=this.centerOfMassOffset;a.traverse(function(a){var c=d.getCollider(a);if(c){g.copy(a.transformComponent.sync().worldTransform);var e=new h;h.combine(f,g,e),e.update();var k=e.translation,l=e.rotation,m=new CANNON.Vec3(k.x,k.y,k.z),n=j;n.fromRotationMatrix(l);var o=new CANNON.Quaternion(n.x,n.y,n.z,n.w);m.vadd(i,m),c.isTrigger&&(c.cannonShape.collisionResponse=!1),b.addShape(c.cannonShape,m,o)}})}},a.exports=d},107:function(a,b,c){function d(a){e.apply(this,arguments),a=a||{},this.type="CannonSphereColliderComponent",this.radius=a.radius||.5,this.cannonShape=new CANNON.Sphere(this.radius)}var e=c(20);d.prototype=Object.create(e.prototype),d.constructor=d,a.exports=d},108:function(a,b,c){function d(a){e.call(this,"CannonSystem",["CannonRigidbodyComponent","TransformComponent"]),a=a||{},h.defaults(a,{gravity:new g(0,-10,0),stepFrequency:60,broadphase:"naive"}),this.priority=1;var b=this.physicsWorld=new CANNON.World;b.gravity.x=a.gravity.x,b.gravity.y=a.gravity.y,b.gravity.z=a.gravity.z,this.setBroadphaseAlgorithm(a.broadphase),this.stepFrequency=a.stepFrequency,this.maxSubSteps=a.maxSubSteps||0}var e=c(42),f=c(23),g=c(8),h=c(6),i=new f;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,d.prototype.reset=function(){for(var a=0;a<this._activeEntities.length;a++){var b=this._activeEntities[a];if(b.cannonRigidbodyComponent.added){var c=b.cannonRigidbodyComponent.body,d=b.transformComponent.sync().worldTransform.translation,e=new f;e.fromRotationMatrix(b.transformComponent.worldTransform.rotation),c.position.set(d.x,d.y,d.z),c.quaternion.set(e.x,e.y,e.z,e.w),c.velocity.set(0,0,0),c.angularVelocity.set(0,0,0)}}},d.prototype.inserted=function(a){var b=a.cannonRigidbodyComponent;b.body=null},d.prototype.deleted=function(a){var b=a.cannonRigidbodyComponent;b&&b.body&&(this.physicsWorld.remove(b.body),b.body=null)};var j=new g;d.prototype.process=function(a){for(var b=this.physicsWorld,c=0;c<a.length;c++){var d=a[c],e=d.cannonRigidbodyComponent;if(!e||!e.added){var f=d.transformComponent,g=new CANNON.Body({mass:e.mass});if(e.body=g,e.addShapesToBody(d),g.shapes.length){e._initialPosition?d.setPosition(e._initialPosition):d.setPosition(f.sync().transform.translation),d.setVelocity(e._initialVelocity);var h=i;h.fromRotationMatrix(f.sync().transform.rotation),g.quaternion.set(h.x,h.y,h.z,h.w),b.add(g);var k=d.cannonDistanceJointComponent;k&&b.addConstraint(k.createConstraint(d)),e.added=!0}else d.clearComponent("CannonRigidbodyComponent")}}var l=1/this.stepFrequency,m=this.maxSubSteps;if(m){var n=performance.now()/1e3;this._lastTime||(this._lastTime=n);var o=n-this._lastTime;this._lastTime=n,b.step(l,o,m)}else b.step(l);for(var c=0;c<a.length;c++){var d=a[c],p=d.cannonRigidbodyComponent;if(p){p.body.computeAABB();var q=p.body.quaternion,r=p.body.position;q.vmult(p.centerOfMassOffset,j),r.vadd(j,j),d.transformComponent.transform.translation.setDirect(j.x,j.y,j.z),i.setDirect(q.x,q.y,q.z,q.w),d.transformComponent.transform.rotation.copyQuaternion(i),d.transformComponent.setUpdated()}}},d.prototype.setBroadphaseAlgorithm=function(a){var b=this.physicsWorld;switch(a){case"naive":b.broadphase=new CANNON.NaiveBroadphase;break;case"sap":b.broadphase=new CANNON.SAPBroadphase(b);break;default:throw new Error("Broadphase not supported: "+a)}},a.exports=d},109:function(a,b,c){function d(a){e.apply(this,arguments),this.type="CannonTerrainColliderComponent",a=a||{data:[],shapeOptions:{}},this.cannonShape=new CANNON.Heightfield(a.data,a.shapeOptions)}var e=c(20);d.prototype=Object.create(e.prototype),d.constructor=d,a.exports=d}});